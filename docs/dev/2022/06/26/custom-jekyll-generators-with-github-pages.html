<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Custom Jekyll Generators with GitHub Pages | Craft Theory</title>
        <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Open+Sans:ital,wght@0,300;0,400;0,700;1,300&family=Roboto+Mono:wght@300;700"
>
        <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/img/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/img/favicon/favicon-16x16.png">
<link rel="manifest" href="/img/favicon/site.webmanifest">

        <link rel="stylesheet" href="/css/main.css">
        <script type="text/javascript" src="/js/scroll.js"></script>
    </head>
    <body>
        <nav id="header">
    <div></div>
    <img class="logo" src="/img/logo.png" alt="Craft Theory Logo">
    <img id="hamburger" src="/img/hamburger.svg" alt="Menu">
    <img id="hamburger-close" src="/img/hamburger_close.svg" alt="Close Menu">
    <a href="/">Home</a>
    <a href="/blog">Blog</a>
    <aside>
        <a href="https://github.com/cmoncur" target="_blank">
            <img src="/img/logo_github.svg" alt="Cody Moncur's GitHub Profile">
        </a>
        <a href="https://www.youtube.com/channel/UCJjVE_IAwBSthzP4l7ouA5g" target="_blank">
            <img src="/img/logo_youtube.svg" alt="Craft Theory YouTube Channel">
        </a>
        <a href="https://www.twitch.tv/crafttheory" target="_blank">
            <img src="/img/logo_twitch.svg" alt="Craft Theory Twitch Channel">
        </a>
    </aside>
    <section>
        <a href="/">Home</a>
        <a href="/blog">Blog</a>
        <aside>
            <a href="https://github.com/cmoncur" target="_blank">
                <img src="/img/logo_github.svg" alt="Cody Moncur's GitHub Profile">
            </a>
            <a href="https://www.youtube.com/channel/UCJjVE_IAwBSthzP4l7ouA5g" target="_blank">
                <img src="/img/logo_youtube.svg" alt="Craft Theory YouTube Channel">
            </a>
            <a href="https://www.twitch.tv/crafttheory" target="_blank">
                <img src="/img/logo_twitch.svg" alt="Craft Theory Twitch Channel">
            </a>
        </aside>
    </section>
</nav>

        <section id="splash" class="splash-blog">
    <div>
        <h1>Custom Jekyll Generators with GitHub Pages</h1>
        <h4>Published June 26, 2022 at 12:24 pm</h4>
        <aside id="banner">
            <h1>Craft Theory</h1>
        </aside>
        <aside id="banner-bottom-left"></aside>
        <aside id="banner-bottom-right"></aside>
        <aside id="banner-shadow"></aside>
    </div>
</section>

        <section id="content">
            <section id="index-content">
                <aside>
                    <h2 id="a-learning-moment">A Learning Moment</h2>

<p>When attempting to publish this Jekyll blog using GitHub Pages for the first time, it became immediately obvious that something wasn’t right – pages that were supposed to be generated by plugins weren’t present. For context, I had created custom plugins to generate index pages for each category and tag. These plugins were closely modeled after the <code class="language-plaintext highlighter-rouge">CategoryPageGenerator</code> sample that <a href="https://jekyllrb.com/docs/plugins/generators/" target="_blank">Jekyll’s generator documentation</a> outlines. Locally, everything looked okay, even using the <code class="language-plaintext highlighter-rouge">github-pages</code> gem. Why, then, didn’t these generated pages show up when published?</p>

<p>As it turns out, GitHub Pages builds Jekyll artifacts using the <code class="language-plaintext highlighter-rouge">--safe</code> flag. One of the primary effects of this flag is that only a handful of curated plugins may be used. Had I known this at the time of theming my blog, I likely would have made some different design choices. But I like the idea of having category and tag indexes. It offers the readers an easy way to find content related to the exact topics that they may be interested in. Therefore, I made the decision that I would keep them.</p>

<p>The question became… how?</p>

<h2 id="a-gordian-knot">A Gordian Knot</h2>

<p>After about two hours of scouring both GitHub’s and Jekyll’s documentation for answers, as well as a handful of blogs and issue threads, it seems that there were three options:</p>

<ul>
  <li>Use a custom or third-party <strong>GitHub Actions workflow</strong> to publish the blog</li>
  <li>Create each page <strong>manually</strong></li>
  <li>Do away with the idea of category and tag index pages altogether</li>
</ul>

<p>These options left me with somewhat of a Gordian knot scenario. For the reasons already mentioned above, doing away with the idea was out of the question. Creating pages manually, even with the help of a Python script that generates them, is tedious, and would likely <em>still rely on the first option</em>. Lastly, configuring a custom or third-party GitHub Actions workflow simply represented more effort than I was willing to give to this particular problem.</p>

<h2 id="cutting-the-knot">Cutting the Knot</h2>

<p>In order to cut this proverbial Gordian knot, I had a fallback. I could simply remove the build artifacts of <code class="language-plaintext highlighter-rouge">jekyll build</code> from repository’s <code class="language-plaintext highlighter-rouge">.gitignore</code>. It’s certainly not the most eloquent solution…</p>

<ul>
  <li>It creates noise in the repository</li>
  <li>It forces me to suppress my OCD tendencies</li>
</ul>

<p>But it’s not all bad. There are a handful of beneficial side effects. Since GitHub Pages isn’t being leveraged to build the Jekyll artifacts…</p>

<ul>
  <li>I can replace the <code class="language-plaintext highlighter-rouge">github-pages</code> gem with <code class="language-plaintext highlighter-rouge">jekyll</code> in my <code class="language-plaintext highlighter-rouge">Gemfile</code></li>
  <li>I can use newer Jekyll versions, which means leveraging an up-to-date Sass compiler</li>
  <li>Most importantly, I am not beholden to GitHub’s restrictive list of approved Jekyll plugins</li>
</ul>

<h2 id="resolution">Resolution</h2>

<p>Just two more hidden (but quick) steps were necessary. By default, GitHub Pages only publishes from the root or <code class="language-plaintext highlighter-rouge">docs</code> directory. So, I had to ensure that the GitHub Pages settings pointed to the <code class="language-plaintext highlighter-rouge">docs</code> directory, and then change Jekyll’s build destination directory to <code class="language-plaintext highlighter-rouge">docs</code> by including the following line in the <code class="language-plaintext highlighter-rouge">_config.yml</code> file:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">...</span>

<span class="na">destination</span><span class="pi">:</span> <span class="s2">"</span><span class="s">docs"</span>

<span class="nn">...</span>
</code></pre></div></div>

<p>Lastly, GitHub Pages looks for a <code class="language-plaintext highlighter-rouge">CNAME</code> file in the directory it publishes from (in this case, <code class="language-plaintext highlighter-rouge">docs</code>). I created a <code class="language-plaintext highlighter-rouge">CNAME</code> file with a single line in the repository root with my custom domain:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>crafttheory.blog
</code></pre></div></div>

<p>When building, Jekyll will copy this <code class="language-plaintext highlighter-rouge">CNAME</code> file to the <code class="language-plaintext highlighter-rouge">docs</code> directory along with the rest of the build artifacts.</p>

<p>Success! The blog maintains the structure that I prefer, and the sacrifice to make it so was minimal.</p>

                </aside>
                <aside>
                    <h2 class="gray">Post Category</h2>
                    <a
                        class="button-category-tag"
                        href="/categories/dev"
                    >
                        Dev
                    </a>
                    <h2 class="gray">Post Tags</h2>
                    
                        <a
                            class="button-category-tag"
                            href="/tags/github%20pages"
                        >
                            Github pages
                        </a>
                    
                        <a
                            class="button-category-tag"
                            href="/tags/jekyll"
                        >
                            Jekyll
                        </a>
                    
                </aside>
            </section>
        </section>
        <footer>
    <nav id="footer">
        <aside>
            <a href="/">Home</a>
            <a href="/blog">Blog</a>
            <a href="/#about">About</a>
        </aside>
        <aside>
            <a
                href="https://github.com/cmoncur"
                target="_blank"
            >
                GitHub
            </a>
            <a
                href="https://www.youtube.com/channel/UCJjVE_IAwBSthzP4l7ouA5g"
                target="_blank"
            >
                YouTube
            </a>
            <a
                href="https://www.twitch.tv/crafttheory"
                target="_blank"
            >
                Twitch
            </a>
        </aside>
        <aside>
            <a href="/categories">
                Categories (1)
            </a>
            <a href="/tags">
                Tags (11)
            </a>
            
            <a href="/categories/dev">
                Posts in Dev (3)
            </a>
            
        </aside>
    </nav>
    <h6>Copyright &copy; 2022 Cody Moncur</h6>
</footer>

    </body>
</html>
